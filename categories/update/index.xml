<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>update on Bob 學習筆記</title>
    <link>https://blog.poyi.tw/categories/update/</link>
    <description>Recent content in update on Bob 學習筆記</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-TW</language>
    <lastBuildDate>Sat, 11 Jul 2015 17:16:55 +0800</lastBuildDate>
    
	<atom:link href="https://blog.poyi.tw/categories/update/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>[Rails] 各種update method</title>
      <link>https://blog.poyi.tw/posts/2015-07-11-rails-various-update-methods/</link>
      <pubDate>Sat, 11 Jul 2015 17:16:55 +0800</pubDate>
      
      <guid>https://blog.poyi.tw/posts/2015-07-11-rails-various-update-methods/</guid>
      <description>##正規Rails的更新 - update
會觸發validation、callback、也會更新updated_at
&amp;gt; Comment.last.update(message: &#39;bbb&#39;) (0.1ms) begin transaction SQL (0.4ms) UPDATE &amp;quot;comments&amp;quot; SET &amp;quot;message&amp;quot; = ?, &amp;quot;updated_at&amp;quot; = ? WHERE &amp;quot;comments&amp;quot;.&amp;quot;id&amp;quot; = ? [[&amp;quot;message&amp;quot;, &amp;quot;bbb&amp;quot;], [&amp;quot;updated_at&amp;quot;, &amp;quot;2015-07-11 09:42:02.303661&amp;quot;], [&amp;quot;id&amp;quot;, 200]] (9.1ms) commit transaction =&amp;gt; true  ##相當於直接下SQL的更新 - update_columns, update_all
而 update_columns 及 update_all 是直接幫你下SQL更新欄位，會忽視Rails的validation，也沒有callback，updated_at也不會更新。所以最好是很確定要更新的值沒問題再使用這類語法。
&amp;gt; Comment.where(:id =&amp;gt; 200).first.update_columns(message: &#39;bbbbb&#39;, post_id: 3) SQL (9.2ms) UPDATE &amp;quot;comments&amp;quot; SET &amp;quot;message&amp;quot; = &#39;bbbbb&#39;, &amp;quot;post_id&amp;quot; = 3 WHERE &amp;quot;comments&amp;quot;.&amp;quot;id&amp;quot; = ? [[&amp;quot;id&amp;quot;, 200]] # update_column 跟 update_columns 相同，只是傳入值key跟value必須是string，並用逗點分隔 &amp;gt; Comment.</description>
    </item>
    
  </channel>
</rss>