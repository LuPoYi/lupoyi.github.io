<!DOCTYPE html>
<html lang='en'><head>
  <title>
    
      Bob 學習筆記
    
  </title>
  <link rel='canonical' href='https://blog.poyi.tw/' />
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1' />
  <meta name='description' content='' />
  <meta name='theme-color' content='#FD3519' />
  
    <link rel="shortcut icon" href="/favicon.png" type="image/x-icon" />
    <link rel="icon" href="/favicon.png" type="image/x-icon" />
  

  <meta name="generator" content="Hugo 0.58.0" />

  





<link rel="stylesheet" href="https://blog.poyi.tw/sass/style.min.cf2eeff825d4dbc673ce0b82d270d9fc32d34973a7d5cd079e0dcf4fe3e77515.css" integrity="sha256-zy7v&#43;CXU28ZzzguC0nDZ/DLTSXOn1c0Hng3PT&#43;PndRU=" media="screen">
<link rel="stylesheet" href="https://blog.poyi.tw/syntax.min.css" integrity="" media="screen">

  <link rel="stylesheet" href="/stylesheets/custom.css" media="screen">

  <meta property="og:title" content="Bob 學習筆記" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://blog.poyi.tw/" />

<meta property="og:updated_time" content="2019-10-19T00:00:00+00:00" />

  <meta itemprop="name" content="Bob 學習筆記">
<meta itemprop="description" content="">


</head>

<body>

  <header style="background-image:linear-gradient(
      rgba(0,0,0,0.4),rgba(0,0,0,0.4)
    ),url(&#39;https://blog.poyi.tw/images/default-sidebar.jpg&#39;)">

  <div class="intro">
    <div class="logo-container">
      <a href="/">
        <img src='https://blog.poyi.tw/images/bob2.jpg' alt="Profile Posts" class="rounded-logo">
      </a>
    </div>
    <h2>Bob</h2>
    <h3>Software Engineer</h3>
    <div class="menu">
      

        <p>
            <a href="/posts/">
                Archive
            </a>
        </p>

        <p>
            <a href="/memo/">
                Memo
            </a>
        </p>

        <p>
            <a href="/about/">
                About
            </a>
        </p>

      
        
        <p>
            <a href="mailto:maydaybob2000@gmail.com" target="_blank" rel="external">
                
            </a>
        </p>
      
    </div>

  </div>

  <div class="socials">
      
  </div>

</header>

  <div class="content-wrapper">
    
      <div class="breadcrumb">
  

<span  class="active">
  <a href="https://blog.poyi.tw/">Bob 學習筆記</a>
  
</span>

</div>

    
    <main id="content" class="">



  <p></p>
  <div id="list">
    
      <a class="h1" href="https://blog.poyi.tw/blog/2013/10/30/rails-sql-server/">[Rails] Connect SQL Server</a>
<div class="post-date">
  October 30, 2013
</div>
<br>
<p>看到官方提供的adpter..真的不知道怎麼下手.. <del>魯蛇無誤</del></p>

<h2 id="ubuntu-connect-to-sql-server">Ubuntu Connect to SQL Server</h2>

<p>想在Unix、Linux環境上，存取SQL Server似乎大多都使用FreeTDS</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 安裝FreeTDS</span>
$ sudo apt-get install freetds-dev freetds-bin tdsodbc</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 檢查FreeTDS版本資訊</span>
$ tsql -C</code></pre></div>
<p><img src="http://user-image.logdown.io/user/2740/blog/2734/post/156771/0fBGvXZHQ4ug2ZQOTol3_2013-11-6%20%E4%B8%8A%E5%8D%88%2010-53-15.jpg" alt="2013-11-6 上午 10-53-15.jpg" /></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 這時候就可以Connect SQL Server</span>
$ tsql -H <span class="o">(</span>SQL Server IP<span class="o">)</span> -p <span class="m">1433</span> -U <span class="o">(</span>account<span class="o">)</span> －P <span class="o">(</span>password<span class="o">)</span> –D <span class="o">(</span>datebase name<span class="o">)</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 直接下TSQL，這邊要用go才會執行</span>
$ <span class="k">select</span> * from Team
$ go</code></pre></div>
<p><img src="http://user-image.logdown.io/user/2740/blog/2734/post/156771/J9JDVHr7S9uu6H8nhWLj_2013-11-6%20%E4%B8%8A%E5%8D%88%2011-03-53.jpg" alt="2013-11-6 上午 11-03-53.jpg" /></p>

<p>這邊代表已能在Ubuntu Connect SQL Server
但Rails還需要其他套件</p>

<hr />

<p><h2 id="rails-connect-to-sql-server-error">Rails Connect to SQL Server (Error)</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 安裝tiny_tds、sqlserver adapter</span>
$ sudo gem install tiny_tds
$ sudo gem install activerecord-sqlserver-adapter</code></pre></div>
<p>修改DateBase.yml
<img src="http://user-image.logdown.io/user/2740/blog/2734/post/156771/n2j3Og9gRCKcn9v70smh_2013-11-6%20%E4%B8%8A%E5%8D%88%2011-36-45.jpg" alt="2013-11-6 上午 11-36-45.jpg" /></p></p>

<p>OK..在這邊理論上是可以直接在Rails調用..
但執行時卻會出錯，查了一下好像還無解 (Rails 4似乎還不太支援之類的..)
錯誤訊息可參考 &gt; <a href="https://github.com/rails-sqlserver/activerecord-sqlserver-adapter/issues/279">https://github.com/rails-sqlserver/activerecord-sqlserver-adapter/issues/279</a>
暫時找不到解法，除非把Rails降到3.x版</p>

<p>Reference:
<a href="https://github.com/rails-sqlserver">https://github.com/rails-sqlserver</a>
<a href="http://www.cnblogs.com/lwm-1988/archive/2012/05/28/2520728.html">http://www.cnblogs.com/lwm-1988/archive/2012/05/28/2520728.html</a>
<a href="http://stackoverflow.com/questions/12010780/rails-how-to-do-search">http://stackoverflow.com/questions/12010780/rails-how-to-do-search</a></p>

<br>
    
      <a class="h1" href="https://blog.poyi.tw/blog/2013/10/25/vmware-vcenter-cluster-exercises/">[VMware] VCenter Cluster 練習筆記</a>
<div class="post-date">
  October 25, 2013
</div>
<br>
<p><img src="http://user-image.logdown.io/user/2740/blog/2734/post/154247/91YcA52rS8Owm0IT1612_SHL-TEST.COM.jpg" alt="SHL-TEST.COM.jpg" /></p>

<p>vSphere ESXi: 整個虛擬化平台，算是一個作業系統
vSphere Client: 操作VM用的軟體(遠端連線到ESXi)
vCenter: 可統一管理，支援ADD 容錯</p>

<p>&ndash;VLAN 45(橘底)
- 準備兩台電腦，灌上vSphere ESXi，設定名稱、IP、VLAN
- 分別灌上不同OS，其中一台用來架AD網域，並將每個OS加入網域
- 找一台安裝vCenter，安裝後直接連入這台就可直接操作其他OS</p>

<p>Cluster</p>

<p>註記：
HT Hyper-threading 可將核心分成兩個序列在處理 cpu數<em>核心數</em>(2)(HT)=邏輯核心
硬碟分區格式 GPT VS MBR：MBR上限為2T(超過2T以上的空間無法分配出來)</p>

<p><img src="http://user-image.logdown.io/user/2740/blog/2734/post/154247/MiZIdkkTlW47nQrleONw_2013-10-27%20%E4%B8%8B%E5%8D%88%2006-32-23.jpg" alt="2013-10-27 下午 06-32-23.jpg" /></p>

<br>
    
      <a class="h1" href="https://blog.poyi.tw/blog/2013/10/16/rails-tips/">[Rails] 小技巧</a>
<div class="post-date">
  October 16, 2013
</div>
<br>
<h2 id="erb的註解">.erb的註解</h2>
<div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="o">&lt;</span><span class="sx">% #註解可寫在井號後面 </span> <span class="s">%&gt;
</span><span class="s">
</span><span class="s">&lt;% if false %&gt;</span>
<span class="err">或寫在這</span>
<span class="o">&lt;</span><span class="sx">% end </span> <span class="o">%&gt;</span></code></pre></div>
<h2 id="rb的註解">.rb的註解</h2>

<pre><code># 一般只用單行註解

=begin
    多行註解比較少見
=end

</code></pre>

<p><h2 id="檢查自己寫了多少code">檢查自己寫了多少code</h2>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ bundle <span class="nb">exec</span> rake stats</code></pre></div>
<p><img src="http://user-image.logdown.io/user/2740/blog/2734/post/147937/9dPiFwgmRd61Oaf5xz2Z_2013-10-17%20%E4%B8%8B%E5%8D%88%2010-38-13.jpg" alt="2013-10-17 下午 10-38-13.jpg" /></p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">$ rake routes</code></pre></div>
<p><img src="http://user-image.logdown.io/user/2740/blog/2734/post/147937/gXa3Ts8RrqxlUGr0Ducw_2013-11-1%20%E4%B8%8B%E5%8D%88%2002-58-54.jpg" alt="2013-11-1 下午 02-58-54.jpg" /></p></p>

<br>
    
      <a class="h1" href="https://blog.poyi.tw/blog/2013/10/14/vmware-vcenter-80-port-is-already-in-use/">[VMware] VCenter 80 Port 已被使用</a>
<div class="post-date">
  October 14, 2013
</div>
<br>
<p>在嘗試安裝vCenter時，中途出現了「VMware VirtualCenter HTTP Port: 80」</p>

<p><img src="http://user-image.logdown.io/user/2740/blog/2734/post/147088/Dh30xvaKQpiGNxLRUEAh_2013-10-14%20%E4%B8%8B%E5%8D%88%2002-30-11.jpg" alt="2013-10-14 下午 02-30-11.jpg" /></p>

<p><img src="http://user-image.logdown.io/user/2740/blog/2734/post/147088/BSI6GB26R6GYxsu7JrMh_181188866_x.jpg" alt="181188866_x.jpg" /></p>

<p>原因是vCenter自動安裝時會把SQL Server及.NET Framework相關的元件裝上，導致IIS佔用了80Port。</p>

<p>解法之一就是直接在Roles裡把IIS移掉就行了(想在vCenter上使用IIS就要另求解了)</p>

<p><br>
Reference:
<a href="http://blog.xuite.net/cadmus.lin/yo/43386562-%E3%80%90%E7%B3%BB%E3%80%91%E5%A6%82%E4%BD%95%E6%9F%A5%E8%A9%A2%E5%93%AA%E5%80%8B%E7%A8%8B%E5%BC%8F%E4%BD%94%E7%94%A8%E4%BA%86%E6%8C%87%E5%AE%9APort">http://blog.xuite.net/cadmus.lin/yo/43386562-%E3%80%90%E7%B3%BB%E3%80%91%E5%A6%82%E4%BD%95%E6%9F%A5%E8%A9%A2%E5%93%AA%E5%80%8B%E7%A8%8B%E5%BC%8F%E4%BD%94%E7%94%A8%E4%BA%86%E6%8C%87%E5%AE%9APort</a></p>

<br>
    
      <a class="h1" href="https://blog.poyi.tw/blog/2013/10/07/ruby-basic/">[Rails] 基本概念（待補）</a>
<div class="post-date">
  October 7, 2013
</div>
<br>
<p><div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="c1"># config/database.yml</span>
<span class="ss">development</span><span class="p">:</span> <span class="c1"># 開發用</span>
  <span class="ss">adapter</span><span class="p">:</span> <span class="n">sqlite3</span>
  <span class="ss">database</span><span class="p">:</span> <span class="n">db</span><span class="o">/</span><span class="n">development</span><span class="o">.</span><span class="n">sqlite3</span>
  <span class="ss">pool</span><span class="p">:</span> <span class="mi">5</span>
  <span class="ss">timeout</span><span class="p">:</span> <span class="mi">5000</span>
<span class="nb">test</span><span class="p">:</span> <span class="c1"># 測試用</span>
  <span class="ss">adapter</span><span class="p">:</span> <span class="n">sqlite3</span>
  <span class="ss">database</span><span class="p">:</span> <span class="n">db</span><span class="o">/</span><span class="n">development</span><span class="o">.</span><span class="n">sqlite3</span>
  <span class="ss">pool</span><span class="p">:</span> <span class="mi">5</span>
  <span class="ss">timeout</span><span class="p">:</span> <span class="mi">5000</span>
<span class="ss">production</span><span class="p">:</span> <span class="c1"># 上線用</span>
  <span class="ss">adapter</span><span class="p">:</span> <span class="n">sqlite3</span>
  <span class="ss">database</span><span class="p">:</span> <span class="n">db</span><span class="o">/</span><span class="n">development</span><span class="o">.</span><span class="n">sqlite3</span>
  <span class="ss">pool</span><span class="p">:</span> <span class="mi">5</span>
  <span class="ss">timeout</span><span class="p">:</span> <span class="mi">5000</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="c1"># config/routes.rb</span></p>

<p><span class="n">get</span> <span class="s2">&#34;welcome&#34;</span> <span class="o">=&gt;</span> <span class="s2">&#34;welcome#index&#34;</span>
<span class="c1"># 代表<a href="http://localhost:3000/welcome">http://localhost:3000/welcome</a> 會對應到 welcome Controller的index Action。 </span></p>

<p><span class="n">resources</span> <span class="ss">:events</span>
<span class="c1"># 會自動生成四個四個命名路由(named routes)，搭配四個HTTP動詞，對應到七個Actions，如下：</span>
<span class="n">get</span>    <span class="s1">&#39;/events&#39;</span>          <span class="o">=&gt;</span> <span class="s2">&#34;events#index&#34;</span><span class="p">,</span>   <span class="ss">:as</span> <span class="o">=&gt;</span> <span class="s2">&#34;events&#34;</span>
<span class="n">post</span>   <span class="s1">&#39;/events&#39;</span>          <span class="o">=&gt;</span> <span class="s2">&#34;events#create&#34;</span><span class="p">,</span>  <span class="ss">:as</span> <span class="o">=&gt;</span> <span class="s2">&#34;events&#34;</span>
<span class="n">get</span>    <span class="s1">&#39;/events/:id&#39;</span>      <span class="o">=&gt;</span> <span class="s2">&#34;events#show&#34;</span><span class="p">,</span>    <span class="ss">:as</span> <span class="o">=&gt;</span> <span class="s2">&#34;event&#34;</span>
<span class="n">put</span>    <span class="s1">&#39;/events/:id&#39;</span>      <span class="o">=&gt;</span> <span class="s2">&#34;events#update&#34;</span><span class="p">,</span>  <span class="ss">:as</span> <span class="o">=&gt;</span> <span class="s2">&#34;event&#34;</span>
<span class="n">delete</span> <span class="s1">&#39;/events/:id&#39;</span>      <span class="o">=&gt;</span> <span class="s2">&#34;events#destroy&#34;</span><span class="p">,</span> <span class="ss">:as</span> <span class="o">=&gt;</span> <span class="s2">&#34;event&#34;</span>
<span class="n">get</span>    <span class="s1">&#39;/events/new&#39;</span>      <span class="o">=&gt;</span> <span class="s2">&#34;events#new&#34;</span><span class="p">,</span>     <span class="ss">:as</span> <span class="o">=&gt;</span> <span class="s2">&#34;new_event&#34;</span>
<span class="n">get</span>    <span class="s1">&#39;/events/:id/edit&#39;</span> <span class="o">=&gt;</span> <span class="s2">&#34;events#edit&#34;</span><span class="p">,</span>    <span class="ss">:as</span> <span class="o">=&gt;</span> <span class="s2">&#34;edit_event&#34;</span></p>

<p><span class="c1"># get 是純讀取資料，對資料不會有任何影響，所以get資料可以回上一頁、refresh都ok；post則反之。</span>
<span class="c1"># HTML只有get、post，而Rails在post加上隱藏參數_method=PUT、_method=DELETE，就多了put、delete能用了。</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="c1"># &lt;% 執行但不輸出</span>
<span class="c1"># &lt;%= 輸出值</span></p>

<p><span class="o">&lt;</span><span class="sx">% @people.each </span> <span class="k">do</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span> <span class="s">%&gt;
</span><span class="s"> &lt;%= p.name %&gt;</span>
<span class="o">&lt;</span><span class="sx">% end </span> <span class="o">%&gt;</span></code></pre></div><div class="highlight"><pre class="chroma"><code class="language-ruby" data-lang="ruby"><span class="n">render</span> <span class="err">回傳使用的樣版</span><span class="p">(</span><span class="err">資料不會遺失</span><span class="p">)</span>
<span class="n">redirect_to</span> <span class="err">重新導向</span><span class="n">action</span></code></pre></div>
<p>Reference:
<a href="http://ihower.tw/rails3/index.html">http://ihower.tw/rails3/index.html</a></p></p>

<br>
    
      <a class="h1" href="https://blog.poyi.tw/blog/2013/10/04/c-delegate-delegate/">[C#]  Delegate 委派</a>
<div class="post-date">
  October 4, 2013
</div>
<br>
<h2 id="delegate-是-c-的特殊型別-用來定義方法-method-function-的-signature-delegate-的實體-instance-可以存放一或多個符合該-signature-的方法-這樣講也許還是鴨子聽雷-不如我們實際來感受一下吧">Delegate 是 C# 的特殊型別，用來定義方法（method/function）的 signature，delegate 的實體（instance）可以存放一或多個符合該 signature 的方法。這樣講也許還是鴨子聽雷，不如我們實際來感受一下吧！</h2>

<p><p>delegate實例獨立於它所封裝的方法的類
這邊在個multicst delegate的例子
using System;</p>
<div class="highlight"><pre class="chroma"><code class="language-c#" data-lang="c#"><span class="k">class</span> <span class="nc">MulticastTester</span>
<span class="p">{</span>
    <span class="k">delegate</span> <span class="k">void</span> <span class="n">Greeting</span><span class="p">();</span></p>

<pre><code>&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Greeting&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myGreeting&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Greeting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SayThankYou&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#34;My single greeting:&amp;#34;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;myGreeting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;Greeting&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;yourGreeting&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Greeting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SayGoodMorning&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;        
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#34;\nYour single greeting:&amp;#34;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;yourGreeting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;Greeting&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ourGreeting&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myGreeting&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;yourGreeting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#34;\nOur multicast greeting:&amp;#34;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ourGreeting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;ourGreeting&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Greeting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SayGoodnight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#34;\nMulticast greeting which includes Goodnight:&amp;#34;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ourGreeting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;ourGreeting&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ourGreeting&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;yourGreeting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#34;\nMulticast greeting without your greeting:&amp;#34;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ourGreeting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;ourGreeting&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;myGreeting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#34;\nSingle greeting without your greeting and my greeting:&amp;#34;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;ourGreeting&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SayThankYou&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#34;Thank you!&amp;#34;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SayGoodMorning&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#34;Good morning!&amp;#34;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SayGoodnight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WriteLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&amp;#34;Goodnight&amp;#34;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
</code></pre>

<p><span class="p">}</span>
</code></pre></div></p>

<br>
    
      <a class="h1" href="https://blog.poyi.tw/blog/2013/09/30/c-ienumerable/">[C#] IEnumerable vs IQueryable</a>
<div class="post-date">
  September 30, 2013
</div>
<br>
<p>在linq的使用上，IEnumerable<T>是不可或缺的泛型介面
像是foreach迴圈就是利用IEnumerable的特性(MoveNext)來實現逐一檢查。</p>

<p>而IQueryable<T>又繼承了IEnumerable<T>&hellip;</p>

<p>兩者的差別從概念上來說：
<strong>IEnumerable<T></strong>:先將查詢的值取出，再一層一層做篩選。
<strong>IQueryable<T></strong>:把全部Linq翻成T-SQL，直到真正要使用時才去執行。</p>
<div class="highlight"><pre class="chroma"><code class="language-c#" data-lang="c#"><span class="c1">// IEnumerable
</span><span class="c1">// list1
</span><span class="c1"></span><span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">Employee</span><span class="p">&gt;</span> <span class="n">list1</span> <span class="p">=</span> <span class="n">myDB</span><span class="p">.</span><span class="n">Employees</span><span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">Name</span><span class="p">.</span><span class="n">StartsWith</span><span class="p">(</span><span class="s">&#34;S&#34;</span><span class="p">));</span>
<span class="n">list1</span> <span class="p">=</span> <span class="n">list1</span><span class="p">.</span><span class="n">Take</span><span class="p">&lt;</span><span class="n">Employee</span><span class="p">&gt;(</span><span class="m">10</span><span class="p">);</span> 

<span class="c1">// list2
</span><span class="c1"></span><span class="n">IQueryable</span><span class="p">&lt;</span><span class="n">Employee</span><span class="p">&gt;</span> <span class="n">list2</span> <span class="p">=</span> <span class="n">myDB</span><span class="p">.</span><span class="n">Employees</span><span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">Name</span><span class="p">.</span><span class="n">StartsWith</span><span class="p">(</span><span class="s">&#34;S&#34;</span><span class="p">));</span>
<span class="n">list2</span> <span class="p">=</span> <span class="n">list2</span><span class="p">.</span><span class="n">Take</span><span class="p">&lt;</span><span class="n">Employee</span><span class="p">&gt;(</span><span class="m">10</span><span class="p">);</span> 
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-SQL" data-lang="SQL"><span class="o">//</span> <span class="n">list1</span>
<span class="k">SELECT</span> <span class="p">[</span><span class="n">t0</span><span class="p">].[</span><span class="n">EmpID</span><span class="p">],</span> <span class="p">[</span><span class="n">t0</span><span class="p">].[</span><span class="n">EmpName</span><span class="p">],</span> <span class="p">[</span><span class="n">t0</span><span class="p">].[</span><span class="n">Salary</span><span class="p">]</span> <span class="k">FROM</span> <span class="p">[</span><span class="n">Employee</span><span class="p">]</span> <span class="k">AS</span> <span class="p">[</span><span class="n">t0</span><span class="p">]</span>
<span class="k">WHERE</span> <span class="p">[</span><span class="n">t0</span><span class="p">].[</span><span class="n">EmpName</span><span class="p">]</span> <span class="k">LIKE</span> <span class="o">@</span><span class="n">p0</span>

<span class="o">//</span> <span class="n">list2</span>
<span class="k">SELECT</span> <span class="n">TOP</span> <span class="mi">10</span> <span class="p">[</span><span class="n">t0</span><span class="p">].[</span><span class="n">EmpID</span><span class="p">],</span> <span class="p">[</span><span class="n">t0</span><span class="p">].[</span><span class="n">EmpName</span><span class="p">],</span> <span class="p">[</span><span class="n">t0</span><span class="p">].[</span><span class="n">Salary</span><span class="p">]</span> <span class="k">FROM</span> <span class="p">[</span><span class="n">Employee</span><span class="p">]</span> <span class="k">AS</span> <span class="p">[</span><span class="n">t0</span><span class="p">]</span>
<span class="k">WHERE</span> <span class="p">[</span><span class="n">t0</span><span class="p">].[</span><span class="n">EmpName</span><span class="p">]</span> <span class="k">LIKE</span> <span class="o">@</span><span class="n">p0</span></code></pre></div>
<p>可以看到 IQueryable 在執行時直接向SQL要求TOP 10；而 IEnumerable 則是把全部撈出來再做一些篩選。</p>

<p>Reference:
<a href="http://msdn.microsoft.com/zh-tw/library/ttw7t8t6.ASPX">http://msdn.microsoft.com/zh-tw/library/ttw7t8t6.ASPX</a>
<a href="http://www.cnblogs.com/seebook/archive/2009/02/21/1395310.html">http://www.cnblogs.com/seebook/archive/2009/02/21/1395310.html</a>
<a href="http://www.dotnet-tricks.com/Tutorial/linq/I8SY160612-IEnumerable-VS-IQueryable.html">http://www.dotnet-tricks.com/Tutorial/linq/I8SY160612-IEnumerable-VS-IQueryable.html</a></p>

<br>
    
      <a class="h1" href="https://blog.poyi.tw/blog/2013/09/30/aspnet-connect-to-sql-server/">[ASP.NET] Connect to SQL Server</a>
<div class="post-date">
  September 30, 2013
</div>
<br>
<p><p>最陽春的寫法</p>
<div class="highlight"><pre class="chroma"><code class="language-c#" data-lang="c#"><span class="c1">// 用SQL驗證來登入
</span><span class="c1"></span><span class="kt">string</span> <span class="n">QueryString</span> <span class="p">=</span> <span class="s">&#34;Data Source=xxxx;Initial Catalog=xxxx;User ID=xxxx;Password=xxxx&#34;</span><span class="p">;</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-c#" data-lang="c#"><span class="c1">// QUERY
</span><span class="c1"></span><span class="n">SqlConnection</span> <span class="n">conn</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SqlConnection</span><span class="p">(</span><span class="n">QueryString</span><span class="p">);</span>
<span class="n">conn</span><span class="p">.</span><span class="n">Open</span><span class="p">();</span></p>

<p><span class="n">sqlStr</span> <span class="p">=</span> <span class="s">&#34;SELECT name FROM Employee&#34;</span><span class="p">;</span></p>

<p><span class="n">SqlCommand</span> <span class="n">cmd</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SqlCommand</span><span class="p">(</span><span class="n">sqlStr</span><span class="p">,</span> <span class="n">conn</span><span class="p">);</span>
<span class="n">SqlDataReader</span> <span class="n">dr</span> <span class="p">=</span> <span class="n">cmd</span><span class="p">.</span><span class="n">ExecuteReader</span><span class="p">();</span>
<span class="k">while</span> <span class="p">(</span><span class="n">dr</span><span class="p">.</span><span class="n">Read</span><span class="p">())</span>
<span class="p">{</span>
        <span class="c1">// 將找到的值取出來
</span><span class="c1"></span>    <span class="kt">string</span> <span class="n">user</span> <span class="p">=</span> <span class="n">dr</span><span class="p">[</span><span class="s">&#34;name&#34;</span><span class="p">].</span><span class="n">ToString</span><span class="p">();</span>
    <span class="c1">//&hellip;
</span><span class="c1"></span><span class="p">}</span></p>

<p><span class="n">conn</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-c#" data-lang="c#"><span class="c1">// UPDATE INSERT DELETE
</span><span class="c1"></span><span class="n">SqlConnection</span> <span class="n">conn</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SqlConnection</span><span class="p">(</span><span class="n">QueryString</span><span class="p">);</span>
<span class="n">conn</span><span class="p">.</span><span class="n">Open</span><span class="p">();</span></p>

<p><span class="n">sqlStr</span> <span class="p">=</span> <span class="s">&#34;UPDATE Employee SET name = &#39;Bob&#39;&#34;</span><span class="p">;</span></p>

<p><span class="n">SqlCommand</span> <span class="n">cmd</span> <span class="p">=</span> <span class="k">new</span> <span class="n">SqlCommand</span><span class="p">(</span><span class="n">sqlStr</span><span class="p">,</span> <span class="n">conn</span><span class="p">);</span>
<span class="n">cmd</span><span class="p">.</span><span class="n">ExecuteNonQuery</span><span class="p">();</span></p>

<p><span class="n">conn</span><span class="p">.</span><span class="n">Close</span><span class="p">();</span>
</code></pre></div><div class="highlight"><pre class="chroma"><code class="language-c#" data-lang="c#"><span class="c1">// 用Parameter
</span><span class="c1"></span><span class="n">sqlStr</span> <span class="p">=</span> <span class="s">&#34;SELECT * FROM Employee WHERE action = @Action&#34;</span><span class="p">;</span>
<span class="n">cmd</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="k">new</span> <span class="n">SqlParameter</span><span class="p">(</span><span class="s">&#34;@Action&#34;</span><span class="p">,</span> <span class="n">item</span><span class="p">.</span><span class="n">ACTION</span><span class="p">));</span>
</code></pre></div></p>

<br>
    
      <a class="h1" href="https://blog.poyi.tw/blog/2013/09/29/aspnet-linq-dynamic-conditions/">[ASP.NET] Linq 動態條件搜尋</a>
<div class="post-date">
  September 29, 2013
</div>
<br>
<p>一般Linq在多種動態條件的組合時會顯得比較麻煩，要額外加很多if else判斷式來達成
而「PredicateBuilder」可以解決這些麻煩，原理上是將where的條件獨立出來</p>
<div class="highlight"><pre class="chroma"><code class="language-c#" data-lang="c#"><span class="k">static</span> <span class="k">void</span> <span class="n">linqPB</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">list</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="p">{</span> <span class="s">&#34;apple&#34;</span><span class="p">,</span> <span class="s">&#34;bob&#34;</span><span class="p">,</span> <span class="s">&#34;coco&#34;</span><span class="p">,</span> <span class="s">&#34;durex&#34;</span><span class="p">,</span> <span class="s">&#34;enter&#34;</span><span class="p">,</span> <span class="s">&#34;fuck&#34;</span><span class="p">};</span>
        <span class="kt">var</span> <span class="n">searchKeyword</span> <span class="p">=</span> <span class="k">new</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;</span> <span class="p">{</span> <span class="s">&#34;o&#34;</span><span class="p">,</span> <span class="s">&#34;e&#34;</span> <span class="p">};</span>
        <span class="kt">var</span> <span class="n">predicate</span> <span class="p">=</span> <span class="n">PredicateBuilder</span><span class="p">.</span><span class="n">False</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;();</span>

        <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">word</span> <span class="k">in</span> <span class="n">searchKeyword</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">temp</span> <span class="p">=</span> <span class="n">word</span><span class="p">;</span>  <span class="c1">// 避免參考到相同變數位址
</span><span class="c1"></span>            <span class="n">predicate</span> <span class="p">=</span> <span class="n">predicate</span><span class="p">.</span><span class="n">Or</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">temp</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="kt">var</span> <span class="n">qry</span> <span class="p">=</span> <span class="n">list</span><span class="p">.</span><span class="n">Where</span><span class="p">(</span><span class="n">predicate</span><span class="p">.</span><span class="n">Compile</span><span class="p">());</span>

        <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="n">item</span> <span class="k">in</span> <span class="n">qry</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Console</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">item</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">Console</span><span class="p">.</span><span class="n">Read</span><span class="p">();</span>
    <span class="p">}</span>
<span class="c1">// result: apple bob coco durex enter
</span></code></pre></div>
<p>主要的重點如下，將條件放入xxx</p>
<div class="highlight"><pre class="chroma"><code class="language-c#" data-lang="c#">  <span class="kt">var</span> <span class="n">predicate</span> <span class="p">=</span> <span class="n">PredicateBuilder</span><span class="p">.</span><span class="n">False</span><span class="p">();</span>   <span class="c1">// 這邊的true/false會與下列的or做串接
</span><span class="c1"></span>  <span class="n">predicate</span> <span class="p">=</span> <span class="n">predicate</span><span class="p">.</span><span class="n">Or</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">name</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="n">xxx</span><span class="p">));</span>
  <span class="n">predicate</span> <span class="p">=</span> <span class="n">predicate</span><span class="p">.</span><span class="n">Or</span><span class="p">(</span><span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">department</span><span class="p">.</span><span class="n">Contains</span> <span class="p">(</span><span class="n">xxx</span><span class="p">));</span>
  <span class="n">myDB</span><span class="p">.</span><span class="n">employee</span><span class="p">.</span><span class="n">Where</span> <span class="p">(</span><span class="n">predicate</span><span class="p">);</span>
</code></pre></div>
<p>Reference:
要使用PredicateBuilder，需要加入參考: LinqKit.dll
<a href="http://www.albahari.com/nutshell/predicatebuilder.aspx">http://www.albahari.com/nutshell/predicatebuilder.aspx</a><br />
<a href="http://blog.sanc.idv.tw/2010/10/linq.html">http://blog.sanc.idv.tw/2010/10/linq.html</a>
<a href="http://leaflet-t-h.blogspot.tw/2011/11/linq-predicatebuilder.html">http://leaflet-t-h.blogspot.tw/2011/11/linq-predicatebuilder.html</a></p>

<br>
    
      <a class="h1" href="https://blog.poyi.tw/blog/2013/09/23/aspnet-string-is-padded-with-zeros/">[C#] 字串補零</a>
<div class="post-date">
  September 23, 2013
</div>
<br>
<p>最近常常手動新增假員工AD帳號來測我的程式
在嘗試跑程式step by step來測試時，想說奇怪怎麼假帳號會有電腦資產
原來這帳號跟設計部門的元老經理的員工工號重複了&hellip;
還好有及時發現沒有把程式執行完，不然IT部門就要起飛了&hellip;</p>

<p>所以想說寫個迴圈來測是不是有其他工號也有重複的案例
而工號欄位都是五位數(BOB00001~BOB99999)
像我的工號是4104需要補足五位數
有三種方式：</p>

<pre><code>int myEmpNo = 4104;
empNo.ToString(&quot;00000&quot;);  
empNo.ToString(&quot;D5&quot;);                        
empNo.ToString().PadLeft(5,'0'); 
// 04104
</code></pre>

<p>查了才知道原來ToString蠻方便的，有些好用的例子</p>

<pre><code>empNo.ToString(&quot;BOB00000&quot;); // BOB04104
empNo.ToString(&quot;C&quot;);  // NT$4,104.00
empNo.ToString(&quot;C&quot;, new System.Globalization.CultureInfo(&quot;en-US&quot;)); $4,104.00

int myPhoneNo =123456789;
myPhoneNo.ToString(&quot;(##) ###-####&quot;); // (12) 345-6789
</code></pre>

<p>PadLeft ：字串向右靠齊，將指定字元填滿左邊。
PadRight：字串向左靠齊，將指定字元填滿右邊。</p>

<p>Reference:
<a href="http://msdn.microsoft.com/zh-tw/library/0c899ak8(v=vs.95).aspx">http://msdn.microsoft.com/zh-tw/library/0c899ak8(v=vs.95).aspx</a>
<a href="http://www.dotblogs.com.tw/ethon.chi/archive/2010/09/27/17917.aspx">http://www.dotblogs.com.tw/ethon.chi/archive/2010/09/27/17917.aspx</a></p>

<br>
    
  </div>

  <div class="pagination">
    
      <a class="prev" href="/page/6/">&larr; Older</a>
    
  
    
      <a class="next" href="/page/4/">Newer &rarr;</a>
    
  </div>

    </main>
  </div>
  <footer>
    <div class="footer-wrapper">
      <p>Made with ❤️ &mdash; Powered by <a href="https://gohugo.io/" target="_blank" rel="external">Hugo</a> and the <a href="https://github.com/bjacquemet/personal-web" target='_blank' rel="external">Personal Web</a> theme.</p>
      <p></p>
    </div>
  </footer>
  <link href="https://fonts.googleapis.com/css?family=Montserrat:500,600|Raleway:400,400i,600" rel="stylesheet">
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-43769917-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</body>
</html>

